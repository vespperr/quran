"use strict";exports.id=796,exports.ids=[796],exports.modules={1862:(e,a,s)=>{s.d(a,{A:()=>r});let r=(0,s(2688).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3018:(e,a,s)=>{s.d(a,{Fc:()=>n,TN:()=>c,XL:()=>o});var r=s(687),t=s(3210),l=s(4224),i=s(6241);let d=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=t.forwardRef(({className:e,variant:a,...s},t)=>(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(d({variant:a}),e),...s}));n.displayName="Alert";let o=t.forwardRef(({className:e,...a},s)=>(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...a}));o.displayName="AlertTitle";let c=t.forwardRef(({className:e,...a},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...a}));c.displayName="AlertDescription"},4796:(e,a,s)=>{s.d(a,{F:()=>L});var r=s(687),t=s(3210),l=s(4934),i=s(5192),d=s(1273),n=s(4163),o="Progress",[c,u]=(0,d.A)(o),[x,m]=c(o),h=t.forwardRef((e,a)=>{var s,t;let{__scopeProgress:l,value:i=null,max:d,getValueLabel:o=g,...c}=e;(d||0===d)&&!y(d)&&console.error((s=`${d}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=y(d)?d:100;null===i||N(i,u)||console.error((t=`${i}`,`Invalid prop \`value\` of value \`${t}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=N(i,u)?i:null,h=j(m)?o(m,u):void 0;return(0,r.jsx)(x,{scope:l,value:m,max:u,children:(0,r.jsx)(n.sG.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":j(m)?m:void 0,"aria-valuetext":h,role:"progressbar","data-state":p(m,u),"data-value":m??void 0,"data-max":u,...c,ref:a})})});h.displayName=o;var f="ProgressIndicator",v=t.forwardRef((e,a)=>{let{__scopeProgress:s,...t}=e,l=m(f,s);return(0,r.jsx)(n.sG.div,{"data-state":p(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...t,ref:a})});function g(e,a){return`${Math.round(e/a*100)}%`}function p(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function j(e){return"number"==typeof e}function y(e){return j(e)&&!isNaN(e)&&e>0}function N(e,a){return j(e)&&!isNaN(e)&&e<=a&&e>=0}v.displayName=f;var b=s(6241);let w=t.forwardRef(({className:e,value:a,...s},t)=>(0,r.jsx)(h,{ref:t,className:(0,b.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:(0,r.jsx)(v,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));w.displayName=h.displayName;var k=s(9821),S=s(2688);let A=(0,S.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var C=s(663),M=s(1862);let R=(0,S.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),$=(0,S.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var D=s(1158);s(5254);var z=s(8767),B=s(1418),F=s(333),T=s(3018);function L({onClose:e}){let{surahs:a,currentReciter:s,refreshSurahs:d,isOffline:n}=(0,B.d)(),{toast:o}=(0,F.d)(),[c,u]=(0,t.useState)(!0),[x,m]=(0,t.useState)({totalSize:0,audioSize:0,textSize:0,surahCount:0}),[h,f]=(0,t.useState)([]),[v,g]=(0,t.useState)(null),[p,j]=(0,t.useState)(0),[y,N]=(0,t.useState)(!1),[b,S]=(0,t.useState)(null),L=(0,t.useCallback)(async()=>{try{S(null);let e=await (0,z.getStorageUsage)();m(e)}catch(e){console.error("Error fetching storage info:",e),S("Could not retrieve storage information. Please try again."),m({totalSize:0,audioSize:0,textSize:0,surahCount:0})}},[]),O=(0,t.useCallback)(e=>{if(!c){o({title:"Offline",description:"You need to be online to download surahs",variant:"destructive"});return}h.includes(e)||v===e||(f(a=>[...a,e]),o({title:"Download Added",description:`Surah ${e} added to download queue`}))},[h,v,c,o]),Z=(0,t.useCallback)(async e=>{try{await (0,z.deleteSurahDownload)(e),await d(),await L(),o({title:"Deleted",description:`Surah ${e} removed from offline storage`})}catch(e){console.error("Delete error:",e),o({title:"Delete Failed",description:"Failed to remove surah from offline storage",variant:"destructive"})}},[d,L,o]),E=async()=>{N(!0);try{await d(),await L(),o({title:"Refreshed",description:"Offline storage information updated"})}catch(e){console.error("Refresh error:",e),o({title:"Refresh Failed",description:"Failed to update offline storage information",variant:"destructive"})}finally{N(!1)}},P=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Offline Manager"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your offline content"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[c?(0,r.jsxs)(k.E,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400",children:[(0,r.jsx)(A,{className:"w-3 h-3 mr-1"})," Online"]}):(0,r.jsxs)(k.E,{variant:"outline",className:"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400",children:[(0,r.jsx)(C.A,{className:"w-3 h-3 mr-1"})," Offline"]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:E,disabled:y,"aria-label":"Refresh storage information",children:y?(0,r.jsx)(M.A,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(R,{className:"w-4 h-4"})})]})]}),b&&(0,r.jsxs)(T.Fc,{variant:"destructive",children:[(0,r.jsx)(T.XL,{children:"Error"}),(0,r.jsx)(T.TN,{children:b})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Storage Usage"}),(0,r.jsx)(i.BT,{children:"Offline content storage information"})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,r.jsx)("span",{children:"Total Storage"}),(0,r.jsx)("span",{children:P(x.totalSize)})]}),(0,r.jsx)(w,{value:x.totalSize/0x3200000*100,className:"h-2"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Audio"}),(0,r.jsx)("p",{className:"font-medium",children:P(x.audioSize)})]}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Text"}),(0,r.jsx)("p",{className:"font-medium",children:P(x.textSize)})]}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Surahs"}),(0,r.jsxs)("p",{className:"font-medium",children:[x.surahCount," / 114"]})]})]})]})})]}),v&&(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-lg",children:"Downloading"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{children:["Surah ",v]}),(0,r.jsxs)("span",{children:[p,"%"]})]}),(0,r.jsx)(w,{value:p,className:"h-2"})]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Available Surahs"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[400px] overflow-y-auto pr-2",children:a.map(e=>(0,r.jsxs)(i.Zp,{className:"flex flex-col",children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.ZB,{className:"text-base",children:[e.id,". ",e.name.english]}),(0,r.jsx)(i.BT,{children:e.name.arabic})]}),e.isDownloaded&&(0,r.jsxs)(k.E,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400",children:[(0,r.jsx)(A,{className:"w-3 h-3 mr-1"})," Downloaded"]})]})}),(0,r.jsx)(i.Wu,{className:"pb-2 flex-grow",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.revelation," â€¢ ",e.versesCount," Verses"]})}),(0,r.jsx)(i.wL,{children:e.isDownloaded?(0,r.jsxs)(l.$,{variant:"outline",className:"w-full",onClick:()=>Z(e.id),"aria-label":`Remove Surah ${e.id} from offline storage`,children:[(0,r.jsx)($,{className:"w-4 h-4 mr-2"})," Remove"]}):h.includes(e.id)||v===e.id?(0,r.jsxs)(l.$,{disabled:!0,className:"w-full",children:[(0,r.jsx)(M.A,{className:"w-4 h-4 mr-2 animate-spin"})," Queued"]}):(0,r.jsxs)(l.$,{variant:"default",className:"w-full",onClick:()=>O(e.id),disabled:!c,"aria-label":`Download Surah ${e.id}`,children:[(0,r.jsx)(D.A,{className:"w-4 h-4 mr-2"})," Download"]})})]},e.id))})]}),e&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(l.$,{onClick:e,children:"Close"})})]})}}};